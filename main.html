import React, { useState } from 'react';
import { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';

const BasicEmotionGame = () => {
  const [currentStep, setCurrentStep] = useState(0);
  const [showEmotion, setShowEmotion] = useState(false);
  const [currentEmotion, setCurrentEmotion] = useState('');

  const gameSteps = [
    {
      title: 'å°ç¾çš„å›°å¢ƒ',
      scenario: 'å°ç¾æ¯è¦ªæ˜¯æ’ç£æ—ï¼Œå¾å°åœ¨éƒ¨è½é•·å¤§ï¼Œæœƒèªªæµåˆ©æ—èªã€‚ä½†å› ç‚ºå¾çˆ¶å§“ã€Œé™³ã€ï¼Œç„¡æ³•å–å¾—åŸä½æ°‘èº«åˆ†ï¼Œä¸èƒ½ç”³è«‹å¤§å­¸ä¿éšœåé¡ã€‚',
      question: 'ä½ è¦ºå¾—é€™æ¨£å…¬å¹³å—ï¼Ÿ',
      options: [
        {
          text: 'ä¸å…¬å¹³ï¼å¥¹æ˜æ˜å¾ˆèªåŒæ’ç£æ—æ–‡åŒ–',
          emotion: 'ğŸ˜¢',
          response: 'å°ç¾çœ¼ä¸­å«æ·šï¼š"è¬è¬ä½ ç†è§£æˆ‘..."'
        },
        {
          text: 'æ³•å¾‹å°±æ˜¯æ³•å¾‹ï¼Œå¿…é ˆéµå®ˆ',
          emotion: 'ğŸ˜',
          response: 'å°ç¾ä½ä¸‹é ­ï¼š"æˆ‘çŸ¥é“...ä½†é‚„æ˜¯å¾ˆé›£é"'
        }
      ]
    },
    {
      title: 'ç¾å¨Ÿçš„ç„¡å¥ˆ',
      scenario: 'ç¾å¨Ÿæ˜¯å¸ƒè¾²æ—å¥³æ€§ï¼Œå«çµ¦æ¼¢äººä¸ˆå¤«ã€‚å› ç‚ºç¤¾æœƒç¿’æ…£å­©å­å¾çˆ¶å§“ï¼Œå¥¹çš„å­©å­ç„¡æ³•å–å¾—åŸä½æ°‘èº«åˆ†ã€‚ä½†å¦‚æœæ˜¯å¸ƒè¾²æ—ç”·æ€§å¨¶æ¼¢äººå¥³æ€§ï¼Œå­©å­å°±èƒ½è¼•æ˜“å–å¾—èº«åˆ†ã€‚',
      question: 'é€™ç¨®å·®åˆ¥å¾…é‡å…¬å¹³å—ï¼Ÿ',
      options: [
        {
          text: 'å¤ªä¸å…¬å¹³ï¼é€™æ˜¯æ€§åˆ¥æ­§è¦–',
          emotion: 'ğŸ˜¡',
          response: 'ç¾å¨Ÿæ†¤æ€’åœ°èªªï¼š"ç‚ºä»€éº¼å¥³æ€§å°±è¦æ‰¿å—é€™ç¨®ä¸å¹³ç­‰ï¼Ÿ"'
        },
        {
          text: 'ç¤¾æœƒç¿’æ…£é›£æ”¹è®Šï¼Œåªèƒ½æ¥å—',
          emotion: 'ğŸ˜”',
          response: 'ç¾å¨Ÿç„¡å¥ˆå˜†æ¯ï¼š"èº«ç‚ºå¥³æ€§çœŸçš„å¾ˆåƒè™§..."'
        }
      ]
    },
    {
      title: 'é˜¿æ˜çš„é¸æ“‡',
      scenario: 'é˜¿æ˜æ˜¯æ³°é›…æ—ï¼Œå¦»å­æ˜¯å®¢å®¶äººã€‚å­©å­å³å°‡å‡ºç”Ÿï¼Œå¦»å­å¸Œæœ›å­©å­å¾æ¯å§“ã€Œæ—ã€ï¼Œä½†é€™æ¨£å­©å­å°±ç„¡æ³•å–å¾—åŸä½æ°‘èº«åˆ†ã€‚',
      question: 'å¦‚æœä½ æ˜¯é˜¿æ˜ï¼Œæœƒæ€éº¼é¸ï¼Ÿ',
      options: [
        {
          text: 'è®“å­©å­å¾çˆ¶å§“ï¼Œä¿ä½åŸä½æ°‘èº«åˆ†',
          emotion: 'ğŸ˜”',
          response: 'é˜¿æ˜å˜†æ°£ï¼š"ç‚ºäº†å­©å­çš„æœªä¾†ï¼Œä½†å°ä¸èµ·è€å©†..."'
        },
        {
          text: 'å°Šé‡å¦»å­ï¼Œå¾æ¯å§“',
          emotion: 'ğŸ˜Ÿ',
          response: 'é˜¿æ˜æ¡æ‹³ï¼š"å®¶åº­å’Œè«§é‡è¦ï¼Œä½†å­©å­å¤±å»æ©Ÿæœƒäº†"'
        }
      ]
    },
    {
      title: 'å°è¯çš„å›°æƒ‘',
      scenario: 'å°è¯çˆ¶æ¯éƒ½æ˜¯é˜¿ç¾æ—ï¼Œä»–è‡ªå‹•æ“æœ‰åŸä½æ°‘èº«åˆ†ã€‚ä½†ä»–å¾å°åœ¨å°åŒ—é•·å¤§ï¼Œä¸æœƒèªªæ—èªï¼Œå°é˜¿ç¾æ—æ–‡åŒ–å¾ˆé™Œç”Ÿã€‚åè§€å°ç¾æ·±åº¦èªåŒæ’ç£æ—æ–‡åŒ–ï¼Œå»æ²’æœ‰èº«åˆ†ã€‚',
      question: 'ä½ èªç‚ºé€™ç¨®æƒ…æ³åˆç†å—ï¼Ÿ',
      options: [
        {
          text: 'ä¸åˆç†ï¼æ–‡åŒ–èªåŒæ¯”è¡€çµ±é‡è¦',
          emotion: 'ğŸ¤”',
          response: 'å°è¯å›°æƒ‘ï¼š"æˆ‘é›–æœ‰èº«åˆ†ï¼Œä½†æ„Ÿè¦ºå°ç¾æ¯”æˆ‘æ›´åƒåŸä½æ°‘..."'
        },
        {
          text: 'è¡€çµ±æ˜¯å®¢è§€æ¨™æº–ï¼Œæ¯”è¼ƒå…¬å¹³',
          emotion: 'ğŸ˜',
          response: 'å°è¯é»é ­ï¼š"è‡³å°‘è¡€çµ±æ˜¯æ˜ç¢ºçš„ï¼Œä¸æœƒæœ‰çˆ­è­°"'
        }
      ]
    },
    {
      title: 'å¿—å·¥è€å¸«çš„è§€å¯Ÿ',
      scenario: 'æè€å¸«åœ¨åŸä½æ°‘éƒ¨è½ç•¶å¿—å·¥è€å¸«ã€‚å¥¹ç™¼ç¾ç­ä¸Šæœ‰åŸä½æ°‘èº«åˆ†çš„å­©å­ï¼Œæœ‰äº›å°æ–‡åŒ–å¾ˆé™Œç”Ÿï¼›æ²’æœ‰èº«åˆ†çš„å­©å­ï¼Œåè€Œç©æ¥µå­¸ç¿’æ—èªå’Œå‚³çµ±ã€‚',
      question: 'é€™è®“ä½ æƒ³åˆ°ä»€éº¼ï¼Ÿ',
      options: [
        {
          text: 'èº«åˆ†èªå®šåˆ¶åº¦éœ€è¦æ”¹é©',
          emotion: 'ğŸ’­',
          response: 'æè€å¸«æ·±æ€ï¼š"ä¹Ÿè¨±æˆ‘å€‘è©²é‡æ–°æ€è€ƒä»€éº¼æ˜¯çœŸæ­£çš„èªåŒ"'
        },
        {
          text: 'é‡é»æ˜¯æ•™è‚²ï¼Œä¸æ˜¯èº«åˆ†',
          emotion: 'ğŸ˜Œ',
          response: 'æè€å¸«å¾®ç¬‘ï¼š"ç„¡è«–æœ‰æ²’æœ‰èº«åˆ†ï¼Œæ–‡åŒ–å‚³æ‰¿éƒ½å¾ˆé‡è¦"'
        }
      ]
    },
    {
      title: 'æ­·å²çš„è«·åˆº',
      scenario: 'ä½ çŸ¥é“å—ï¼Ÿç¾åœ¨ç”¨ä¾†è­‰æ˜åŸä½æ°‘èº«åˆ†çš„ã€Œæ¼¢å§“ã€ï¼Œå…¶å¯¦æ˜¯300å¹´å‰æ¸…æœæ”¿åºœå¼·è¿«åŸä½æ°‘ç¥–å…ˆæ¥å—çš„ã€‚ç•¶æ™‚æ˜¯ç‚ºäº†ã€ŒåŒåŒ–ã€ï¼Œç¾åœ¨å»è¦ç”¨å®ƒä¾†ã€Œè­‰æ˜èªåŒã€ã€‚',
      question: 'çŸ¥é“é€™å€‹æ­·å²å¾Œï¼Œä½ æœ‰ä»€éº¼æ„Ÿæƒ³ï¼Ÿ',
      options: [
        {
          text: 'å¤ªè«·åˆºäº†ï¼ç”¨è¢«è¿«çš„å§“æ°è­‰æ˜èªåŒï¼Ÿ',
          emotion: 'ğŸ˜±',
          response: '"æ²’éŒ¯ï¼é€™æ ¹æœ¬æ˜¯æ­·å²çš„è’è¬¬å¾ªç’°ï¼"'
        },
        {
          text: 'æ­·å²è¤‡é›œï¼Œä½†ç¾åœ¨éœ€è¦æ¨™æº–',
          emotion: 'ğŸ¤”',
          response: '"é›–ç„¶æ­·å²æœ‰å•é¡Œï¼Œä½†ç¸½è¦æœ‰å€‹æ¨™æº–å§..."'
        }
      ]
    }
  ];

  const handleChoice = (option) => {
    setCurrentEmotion({
      icon: option.emotion,
      response: option.response
    });
    setShowEmotion(true);

    // 2ç§’å¾Œéš±è—æƒ…æ„Ÿï¼Œé€²å…¥ä¸‹ä¸€æ­¥
    setTimeout(() => {
      setShowEmotion(false);
      setTimeout(() => {
        if (currentStep < gameSteps.length - 1) {
          setCurrentStep(currentStep + 1);
        } else {
          setCurrentStep('end');
        }
      }, 500);
    }, 2000);
  };

  const reset = () => {
    setCurrentStep(0);
    setShowEmotion(false);
    setCurrentEmotion('');
  };

  if (currentStep === 'end') {
    return (
      <div className="max-w-3xl mx-auto p-6">
        <div className="text-center mb-8">
          <h1 className="text-3xl font-bold text-green-800 mb-4">é«”é©—å®Œæˆï¼</h1>
          <p className="text-lg text-gray-600">ä½ å·²ç¶“æ„Ÿå—åˆ°ã€ŠåŸä½æ°‘èº«åˆ†æ³•ã€‹å¸¶ä¾†çš„æƒ…æ„Ÿè¡æ“Š</p>
        </div>

        <Card className="border-2 border-blue-300 mb-6">
          <CardHeader>
            <CardTitle className="text-center text-xl text-blue-800">æ†²æ³•æ³•åº­çš„æ±ºå®š</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="text-center space-y-4">
              <p className="text-lg font-semibold text-red-600">å®£å‘Šé•æ†²ï¼</p>
              <p className="text-gray-700">
                2022å¹´æ†²æ³•æ³•åº­èªç‚ºå§“åæ¢æ¬¾é•ååŸä½æ°‘èº«åˆ†èªåŒæ¬Šå’Œå¹³ç­‰æ¬Šï¼Œ
                å½±éŸ¿ç´„9.5è¬äººï¼Œæ³•å¾‹é ˆåœ¨2å¹´å…§ä¿®æ­£ã€‚
              </p>
              <div className="bg-yellow-50 p-4 rounded-lg">
                <p className="text-sm text-orange-800">
                  <strong>æ ¸å¿ƒå•é¡Œï¼š</strong>ä¸æ‡‰è©²ç”¨ã€Œè¢«æ®–æ°‘è€…å¼·åŠ çš„å§“æ°ã€ä¾†è­‰æ˜ã€ŒåŸä½æ°‘èªåŒã€
                </p>
              </div>
            </div>
          </CardContent>
        </Card>

        <div className="text-center">
          <button
            onClick={reset}
            className="bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700"
          >
            é‡æ–°é«”é©—
          </button>
        </div>
      </div>
    );
  }

  const step = gameSteps[currentStep];

  return (
    <div className="max-w-3xl mx-auto p-6">
      <div className="text-center mb-8">
        <h1 className="text-3xl font-bold text-purple-800 mb-4">åŸä½æ°‘èº«åˆ†èªå®šé«”é©—</h1>
        <p className="text-sm text-gray-500">æƒ…å¢ƒ {currentStep + 1} / {gameSteps.length}</p>
      </div>

      <Card className="border-2 border-purple-300 mb-6">
        <CardHeader>
          <CardTitle className="text-xl text-purple-800">{step.title}</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="space-y-4">
            <div className="bg-gray-50 p-4 rounded-lg">
              <p className="text-gray-700">{step.scenario}</p>
            </div>
            
            <div className="bg-blue-50 p-4 rounded-lg">
              <h4 className="font-bold text-blue-800 mb-3">{step.question}</h4>
              <div className="space-y-3">
                {step.options.map((option, index) => (
                  <button
                    key={index}
                    onClick={() => handleChoice(option)}
                    className="w-full text-left p-3 border-2 border-blue-200 rounded-lg hover:border-blue-400 hover:bg-blue-100 transition-colors"
                  >
                    {option.text}
                  </button>
                ))}
              </div>
            </div>

            {showEmotion && (
              <div className="mt-4 p-4 bg-yellow-50 border-2 border-yellow-300 rounded-lg text-center animate-pulse">
                <div className="text-4xl mb-2">{currentEmotion.icon}</div>
                <p className="text-gray-700 italic">"{currentEmotion.response}"</p>
              </div>
            )}
          </div>
        </CardContent>
      </Card>

      <div className="text-center">
        <div className="w-full bg-gray-200 rounded-full h-2 mb-4">
          <div 
            className="bg-purple-600 h-2 rounded-full transition-all duration-500"
            style={{ width: `${((currentStep + 1) / gameSteps.length) * 100}%` }}
          ></div>
        </div>
        <p className="text-xs text-gray-500">é»æ“Šé¸é …æŸ¥çœ‹è§’è‰²åæ‡‰</p>
      </div>
    </div>
  );
};

export default BasicEmotionGame;
